<!DOCTYPE html>
<head>
    <title>Movie Recommending Site - Home </title>
    <style>
        body{
            background-color:aquamarine;
            color:black;
            margin:10px;
        }
        header{
            background-color: blue;
            color: whitesmoke;
            padding:10px;
            width:50%;
            text-align:center;
            margin:auto;
            margin-bottom:10px;
        }
        main{
            background-color:paleturquoise;
            text-align:center;
            margin:auto;
            width:75%;
            padding:10px;
            min-height:250px;
        }
        table{
            margin:auto;
            margin-top:10px;
            border:3px black solid;
            padding:10px;
            background-color: white;
        }
        tr{
            border:3px black solid;
        }
    </style>
</head>
<body>
    <header>
        <h1>Movie Recommending Site</h1>
        <h3>By Quinn, Jaden, Lamyea</h3>
    </header>
    <main>
        <p>Welcome to our webpage!</p>
        <p>Put your search below. Similar titles will be returned.</p>
        <form onSubmit="callAPI()">
            <input type="text" id="input">
            <input type="submit" value="Submit">
        </form>
        <aside id="output">
        </aside>
    </main>
    
    <script>
        
        function callAPI(){
            event.preventDefault();
            // Key: 1060040-APIkeyre-C292F78E
            // To add, put '&k=' then the key to attach to url.
            // Make sure the 'Allow CORS: Access-Control-Allow-Origin' extention is enabled when loading the request.

            // Note that in the example, 'red+hot+chili+peppers%2C+pulp+fiction&type=music' is the search
            input = document.getElementById("input").value;
            api = fetch('https://tastedive.com/api/similar?q=movie:'+input+'&type=movie&k=1060040-APIkeyre-C292F78E')
            .then((res)=>res.json())
                .then((res) =>{
                    console.log(res)
                    table = document.createElement('table');
                    tableData = document.createElement('tr');
                    tableData.textContent = 'Titles for \"' + input + '\":' ;
                    table.appendChild(tableData);
                    for(i=0; i<res.similar.results.length; i++){      
                        tableData = document.createElement('tr');
                        tableData.textContent = res.similar.results[i].name;
                        table.appendChild(tableData);
                    }
                    document.getElementById('output').appendChild(table);
                })
        }
    </script>
</body>